doctype html

.mb-2
    button.btn.btn-sm.btn-outline-primary(
        type='button',
        (click)='onBackClick()'
    ) Back
hr

form.needs-validation(
    #form='ngForm',
    [class.was-validated]='!!(whenSubmittedForm$ | async)',
    (submit)='onFormSubmit(form)'
)
    .form-group
        label(for='measurement') Measurement value
        input.form-control.m-form-control.form-control-sm#measurement(
            type='number',
            placeholder='Enter measurement',
            name='measurement',
            [(ngModel)]='measurementRequest.measurement',
            #measurement='ngModel',
            required='required',
            min='0',
            appIsPositiveNumber,
        )

    .form-group
        label(for='meterMeasurementTypeId') Measurement type
        select.custom-select.m-form-control.custom-select-sm#meterMeasurementTypeId(
            required='required',
            name='meterMeasurementTypeId',
            [(ngModel)]='measurementRequest.meterMeasurementTypeId'
        )
            option(
                *ngFor='let measurementType of measurementTypes',
                [value]='measurementType.id'
            ) {{ measurementType.name }}

    .form-group.form-row
      .col
        label.mr-2(for='month') Date
        app-month-selector(
            startYear='2009',
            [canClear]='false',
            [(year)]='measurementRequest.date.year',
            [(month)]='measurementRequest.date.month'
        )

    .form-group
        label(for='comment') Comment
        textarea.form-control.m-form-control.form-control-sm#comment(
            type='text',
            placeholder='Enter comment',
            name='comment',
            [(ngModel)]='measurementRequest.comment',
            #name='ngModel'
        )
    button.btn.btn-sm.btn-success(
        *ngIf='!isLoading',
        type='submit'
    ) Update
    button.btn.btn-sm.btn-success(
        *ngIf='isLoading',
        type='button'
    )
        span.spinner-grow.spinner-grow-sm.mr-1(
            role='status',
            aria-hidden='true'
        )
        span.sr-only Loading
        | Updating..